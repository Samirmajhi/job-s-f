<!--
=========================================================
* Soft UI Dashboard - v1.0.7
=========================================================

* Product Page: https://www.creative-tim.com/product/soft-ui-dashboard
* Copyright 2023 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="static/assets/img/apple-icon.png">
  <link
  rel="shortcut icon"
  href="{{url_for('static', filename='images/favicon.png')}}"
  type="image/x-icon"
/>
  <title>
    Responses | A2ZRecruit
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link id="pagestyle" href="{{url_for('static', filename='assets/css/nucleo-icons.css')}}" rel="stylesheet"></link>
  <link id="pagestyle" href="{{url_for('static', filename='assets/css/nucleo-svg.css')}}" rel="stylesheet"></link>
  <!-- CSS Files -->
  <link id="pagestyle" href="{{url_for('static', filename='assets/css/soft-ui-dashboard.css')}}" rel="stylesheet"></link>
  <!-- Nepcha Analytics (nepcha.com) -->
  <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
  <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
</head>
<style>
  .pagination {
    display: flex;
    overflow-x: auto;
  }
  
  .pagination a {
    color: black;
    padding: 8px 16px;
    text-decoration: none;
    white-space: nowrap;
  }
  
  .pagination a.active {
    background-image: linear-gradient(310deg, #7928CA 0%, #FF0080 100%);
    color: white;
    border-radius: 5px;
  }
  
  .pagination a:hover:not(.active) {
    background-color: #ddd;
    border-radius: 5px;
  }
  
  .pagination::-webkit-scrollbar {
    display: none;
  }
  
  .pagination-container {
    width: 50%;
    display: flex;
    align-items: center;
  }
  
  .arrow {
    cursor: pointer;
    padding: 8px;
  }
  </style>
<body class="g-sidenav-show  bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 bg-white" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0" href="#" target="_blank">
        <!-- <img src="static/assets/img/logo-ct-dark.png" class="navbar-brand-img h-100" alt="main_logo"> -->
        <img src="{{url_for('static', filename='images/mbsalogo.png')}}" class="navbar-brand-img h-100" alt="main_logo"><br>
        <span class="ms-1 font-weight-bold">Hirer Dashboard</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link  active" href="/dashboard">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <svg width="12px" height="12px" viewBox="0 0 42 42" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>office</title>
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g transform="translate(-1869.000000, -293.000000)" fill="#FFFFFF" fill-rule="nonzero">
                    <g transform="translate(1716.000000, 291.000000)">
                      <g id="office" transform="translate(153.000000, 2.000000)">
                        <path class="color-background opacity-6" d="M12.25,17.5 L8.75,17.5 L8.75,1.75 C8.75,0.78225 9.53225,0 10.5,0 L31.5,0 C32.46775,0 33.25,0.78225 33.25,1.75 L33.25,12.25 L29.75,12.25 L29.75,3.5 L12.25,3.5 L12.25,17.5 Z"></path>
                        <path class="color-background" d="M40.25,14 L24.5,14 C23.53225,14 22.75,14.78225 22.75,15.75 L22.75,38.5 L19.25,38.5 L19.25,22.75 C19.25,21.78225 18.46775,21 17.5,21 L1.75,21 C0.78225,21 0,21.78225 0,22.75 L0,40.25 C0,41.21775 0.78225,42 1.75,42 L40.25,42 C41.21775,42 42,41.21775 42,40.25 L42,15.75 C42,14.78225 41.21775,14 40.25,14 Z M12.25,36.75 L7,36.75 L7,33.25 L12.25,33.25 L12.25,36.75 Z M12.25,29.75 L7,29.75 L7,26.25 L12.25,26.25 L12.25,29.75 Z M35,36.75 L29.75,36.75 L29.75,33.25 L35,33.25 L35,36.75 Z M35,29.75 L29.75,29.75 L29.75,26.25 L35,26.25 L35,29.75 Z M35,22.75 L29.75,22.75 L29.75,19.25 L35,19.25 L35,22.75 Z"></path>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <span class="nav-link-text ms-1">All Jobs</span>
          </a>
        </li>
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Account pages</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link  " href="/profile">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <svg width="12px" height="12px" viewBox="0 0 46 42" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>customer-support</title>
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g transform="translate(-1717.000000, -291.000000)" fill="#FFFFFF" fill-rule="nonzero">
                    <g transform="translate(1716.000000, 291.000000)">
                      <g transform="translate(1.000000, 0.000000)">
                        <path class="color-background opacity-6" d="M45,0 L26,0 C25.447,0 25,0.447 25,1 L25,20 C25,20.379 25.214,20.725 25.553,20.895 C25.694,20.965 25.848,21 26,21 C26.212,21 26.424,20.933 26.6,20.8 L34.333,15 L45,15 C45.553,15 46,14.553 46,14 L46,1 C46,0.447 45.553,0 45,0 Z"></path>
                        <path class="color-background" d="M22.883,32.86 C20.761,32.012 17.324,31 13,31 C8.676,31 5.239,32.012 3.116,32.86 C1.224,33.619 0,35.438 0,37.494 L0,41 C0,41.553 0.447,42 1,42 L25,42 C25.553,42 26,41.553 26,41 L26,37.494 C26,35.438 24.776,33.619 22.883,32.86 Z"></path>
                        <path class="color-background" d="M13,28 C17.432,28 21,22.529 21,18 C21,13.589 17.411,10 13,10 C8.589,10 5,13.589 5,18 C5,22.529 8.568,28 13,28 Z"></path>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <span class="nav-link-text ms-1">Profile</span>
          </a>
        </li>
      </ul>
    </div>

  </aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
     
          </div>
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item d-flex align-items-center">
            </li>
            <li class="nav-item d-flex align-items-center">
              <a href="/chats" class="btn btn-primary btn-sm mb-0 me-3" >All Chats <i class="mx-1 fa fa-bell" aria-hidden="true" style="font-size: 14px;"></i> </a>
            </li>
            <li class="nav-item d-flex align-items-center">
              <a href="/logout" class="btn btn-primary btn-sm mb-0 me-3" >Logout</a>
            </li>
            <!-- Modal -->
            <li class="nav-item d-flex align-items-center">
              <!-- <a href="javascript:;" class="nav-link text-body font-weight-bold px-0">
                <i class="fa fa-user me-sm-1"></i>
                <span class="d-sm-inline d-none">Sign In</span>
              </a> -->
            </li>
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
            <li class="nav-item px-3 d-flex align-items-center">
              <!-- <a href="javascript:;" class="nav-link text-body p-0">
                <i class="fa fa-cog fixed-plugin-button-nav cursor-pointer"></i>
              </a> -->
            </li>
            <li class="nav-item dropdown pe-2 d-flex align-items-center">
              <!-- <a href="javascript:;" class="nav-link text-body p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-bell cursor-pointer"></i> -->
              </a>
          
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-12">
          <div class="card mb-4">
            <div class="card-header pb-0">
              <h6>Responses for {{job_details['job_title']}} [{{job_details['mode_of_work']}}]</h6>
            </div>
            <div class="card-body px-0 pt-0 pb-2">
              <div class="table-responsive p-0">
                {% if all_responses!=[] %}
                <table class="table align-items-center mb-0">
                    <thead>
                      <tr>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Name</th>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Mob No.</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Profile</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Applied On</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"></th>
                        <!-- <th class="text-secondary opacity-7"></th> -->
                      </tr>
                    </thead>
                    
                    <tbody>
                        {% for responses in all_responses %}
                      <tr>
                        <td>
                          <div class="d-flex px-2 py-1">
                            <div>
                              <img src="{{url_for('static', filename='assets/img/team-2.jpg')}}" class="avatar avatar-sm me-3" alt="user1">
                            </div>
                            <div class="d-flex flex-column justify-content-center">
                              <h6 class="mb-0 text-sm">{{responses['candidate_details'][0]['candidate_name']}}</h6>
                              <p class="text-xs text-secondary mb-0"><a href="mailto:'{{responses['user_details'][0]['email']}}'">{{responses['user_details'][0]['email']}}</a></p>
                            </div>
                          </div>
                        </td>
                        <td>
                          <p class="text-xs font-weight-bold mb-0"><a href="tel:{{responses['candidate_details'][0]['candidate_mobno']}}">{{responses['candidate_details'][0]['candidate_mobno']}}</a></p>
                        </td>
                        <td class="align-middle text-center text-sm">
                          <a class="badge badge-sm bg-gradient-success" target="_blank" href="/public/candidate/{{responses['user_id']}}">Profile</a>
                        </td>
                        <td class="align-middle text-center">
                          <span class="text-secondary text-xs font-weight-bold">{{responses['applied_on'].strftime("%d/%m/%Y")}}</span>
                        </td>
                        <td class="align-middle text-center text-sm">
                   
                          <a type="button" class="badge badge-sm bg-gradient-success" data-bs-toggle="modal" data-bs-target="#modal_{{responses['candidate_details'][0]['user_id']}}">{{responses['status']}}</a>
                          <div class="modal fade" id="modal_{{responses['candidate_details'][0]['user_id']}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLabel">Change Status</h5>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <form action="/status/job/{{responses['candidate_details'][0]['user_id']}}" method="post" >
                                    <input type="hidden" name="job_id" value="{{responses['job_id']}}">
                                    <select class="form-control" value="{{responses['status']}}" name="status" id="job_status_{{responses['candidate_details'][0]['user_id']}}">
                                      <option value="Applied">Applied</option>
                                      <option value="Accepted">Accepted</option>
                                      <option value="Rejected">Rejected</option>
                                    </select>
                                    <script>
                                      document.getElementById("job_status_{{responses['candidate_details'][0]['user_id']}}").value = "{{responses['status']}}"
                                    </script>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn bg-gradient-primary">Save changes</button>
                                  </div>
                                </form>
                              </div>
                            </div>
                          </div>
                        </td>
                        <td class="align-middle text-center">
                          {% if 'chat_initiated' in responses %}
                          <a href="/chat/{{responses['user_id']}}/{{responses['job_id']}}"><span class="text-secondary text-xs font-weight-bold">Chat Initiated</span></a>
                          {% else %}
                          <form action="/initiate_chat" method="post" onsubmit="return initiateChat()">
                            <input type="hidden" value="{{responses['user_id']}}" name="candidate_id">
                            <input type="hidden" value="{{responses['job_id']}}" name="job_id">
                          <button type="submit" style="all:unset; cursor: pointer;"><span class="text-secondary text-xs font-weight-bold">Initiate Chat</span></button>
                          </form>
                          {% endif %}
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                    {% else %}
                    <p class="text-center">No Responses</p>
                  </table>
      
                  {% endif %}
                    <div class="pagination-container" style="margin-top: 17px;">
                      <div class="arrow" id="leftArrow">&laquo;</div>
                      <div class="pagination">
                        {% for num in range(total_pages) %}
                        {% if page_number == num+1 %}
                        <a href="/responses/job/{{job_id}}?pageno={{page_number}}" class="active">{{num+1}}</a>
                        {% else %}
                        <a href="/responses/job/{{job_id}}?pageno={{num+1}}">{{num+1}}</a>
                        {% endif %}
                        {% endfor %}
                      </div>
                      <div class="arrow" id="rightArrow">&raquo;</div>
                    </div>
                </div>
              
            </div>
      
          </div>
        </div>
      
      </div>

      <footer class="footer pt-3  ">
        <div class="container-fluid">
          <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6 mb-lg-0 mb-4">
             
            </div>
        
          </div>
        </div>
      </footer>
    </div>
  </main>
    <script>
      function initiateChat(){
        let a = confirm("Are you sure you want to initiate chat with this candidate?")
        if(a){
          return true;
        }
        else{
          return false;
        }
      }
      function deleteJob(){
        let a = confirm("Are you sure you want to delete this job?")
        if(a){
          return true;
        }
        else{
          return false;
        }
      }
    </script>
  <!--   Core JS Files   -->

  <script src="{{url_for('static', filename='assets/js/core/popper.min.js')}}"></script>
  <script src="{{url_for('static', filename='assets/js/core/bootstrap.min.js')}}"></script>
  <script src="{{url_for('static', filename='assets/js/plugins/perfect-scrollbar.min.js')}}"></script>
  <script src="{{url_for('static', filename='assets/js/plugins/smooth-scrollbar.min.js')}}"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="{{url_for('static', filename='assets/js/soft-ui-dashboard.min.js')}}"></script>
</body>

</html>